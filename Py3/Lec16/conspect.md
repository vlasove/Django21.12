## Лекция 16. Перенос на сервер и причесывание проекта

***Проблема:*** на данный момент проект работает, выполняет все необходимые функции и имеет минимальную поддержу пользователя . Но мы бы хотели , чтобы наш проект стал популярным и доступным всем . Для этого необходимо весь проект перенести на хостинг. Где этот хостинг взять?
И как переносить приложение на этот хостинг?

***Задача:*** перенсти проект ```Django``` на хостинг. В качестве учебного хостинга возьмем ```ngrok```. В качестве хост-машины будем использовать данную ОС. ```ngrok``` сам сгенерирует нам необходимые публичные ```host``` и ```domen```.

### Шаг 1. Получим и отконфигурируем утилиту ```ngrok```.
```ngrok``` - туннельная утилита, которая позволяет генерировать публичные хосты (предоставляет публичные хосты) и связывает наш локальный порт (нашей локальной хост-машины) с публичным доменом.

* Заходим на сайт https://ngrok.com/
* Регестрируемся на сайте
* После успешной регистрации скачиваем саму утилиту ```ngrok``` : ***DOWNLOAD FOR ....***
* После скачивания поместим ```ngrok.exe``` (находится в скачанном архиве) в проектную директорию
* Теперь отконфигурируем ```ngrok.exe``` в соответствии с вашим ```auth_token```
* Для этого выполним команду ```ngrok authtoken <your-auth-token>```
* Теперь у нас есть отконфигурированный ```host```

### Шаг 2. Подготовка проекта Django для переноса на host
В файле ```settings.py```-> ```ALLOWED_HOSTS = ["*"]```. Теперь наш проект может быть беспроблемно перенес на абсолютно любой хост, который мы только ему предложим.

### Шаг 3. Запуск и связывание портов
Для того, чтобы сгенерировать публичный хост и домен при помощи ```ngrok``` необходимо выполнить 2 условия:

* Порт, который будет связан с ```ngrok``` должен совпадать с портом локального хоста, где запускается само приложение (в нашем случае это порт ```8000```)
* Используем при генерации ```http``` протокол (остальные протоколы являются платными).

Запускаем ```ngrok``` командой : ```ngrok http 8000``` . После чего нам становится доступно 2 адреса (2 хоста):
* ```http://.....```
* ```https://....```

### Шаг 4. Проверим, что все работает
Попробуем перейти на выбитый хост ```https://67681b092f48.ngrok.io```. Все должно быть ок!


### Шаг 5. Отключим Debug
Не хотим, чтобы пользователь, видел все кишки наших запросв при неудачном ```url-request```. Для этого в ```settings.py```  -> ```DEBUG=False```. ***Важно помнить:*** что если вы отключаете опцию ```DEBUG``` обязательно следует указать набор доступных ```host```'ов. т.к. ```Django``` (после отключения Debug) начинает думать, что это ```production ready deploy```.


### Теперь попробуем причесать наш проект.
Существует стандарт ```PEP8```, которого необходимо придерживаться при написании программного кода. Для того есть 2 варианта:
* Открываем документацию ```PEP8``` и вручную переверстываем все модули в проекте (путь для настоящих мужиков).
* Использование синтаксического анализатор кода (линтеры).

Существует 3 популярных линтера в мире ```Python``` разработки:
* ```autopep8``` - по умолчанию достаточно мягкий, может изменять недочеты на месте
* ```flake8``` - более агрессивный линтер, имеет также функционал ```in-place``` изменений, достаточно удобная конфигурация
* ```pylint``` - ***УЛЬТРА АГРЕССИВНЫЙ ЛИНТЕР*** даже из коробки, самый консервативный линтер, проверяет все до символа (по умолчанию не имеет встроенного функционала ```in-place```)

Для начала рекомендуется освоить ```autopep8```. Для того, чтобы установить ```autopep8``` :
```pip instal autopep8``` (сейчас буду станавливать не в окружении, а в общий репозиторий).
Теперь мы хотим запустить линтер ```autopep8``` для всего проекта целиком:

* Для начала перейдем в проектную директорию (в нашем случае ```Lec16```)
* Выполним команду ```autopep8 . --recursive --aggressive --in-place --verbose```

***Рекомендуется ознакомиться*** к в аналогичном стиле использовать ```flake8``` и ```pylint```.



***Для дальнейшего изучения:*** Django-REST framework
